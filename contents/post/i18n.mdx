---
title: Next.js internationalization (i18n) ì ìš©í•˜ê¸°
summary: Next.jsì˜ i18nì„ ì ìš©í•˜ëŠ” ê³¼ì •ì„ ì•Œì•„ë´…ì‹œë‹¤.
publishedAt: '2023-11-26'
article: etc
---

<iframe src='https://giphy.com/embed/kMmkMxnfb4Q4wKtjqI' width='240' height='240' class='giphy-embed' allowFullScreen />
<p>
  <a href='https://giphy.com/gifs/Tolgee-i18n-internationalization-numeronym-kMmkMxnfb4Q4wKtjqI'>via GIPHY</a>
</p>

# ëª©ì°¨

- [1. í”„ë¡œì íŠ¸ ì„¸íŒ…](#1-í”„ë¡œì íŠ¸-ì„¸íŒ…)
- [2. ì§€ì›í•˜ëŠ” ì–¸ì–´ë³„ë¡œ í…ìŠ¤íŠ¸ ì„¤ì •í•˜ê¸°](#2-ì§€ì›í•˜ëŠ”-ì–¸ì–´ë³„ë¡œ-í…ìŠ¤íŠ¸-ì„¤ì •í•˜ê¸°)
- [3. ì‚¬ìš©ì localeì„ ê°€ì ¸ì™€ redirect ì‹œì¼œì£¼ê¸°](#3-ì‚¬ìš©ì-localeì„-ê°€ì ¸ì™€-redirect-ì‹œì¼œì£¼ê¸°)
- [4. locale ë„¤ë¹„ê²Œì´ì…˜ ë§Œë“¤ê¸°](#4-locale-ë„¤ë¹„ê²Œì´ì…˜-ë§Œë“¤ê¸°)
- [5. SSG ì ìš©í•˜ê¸°](#5-ssg-ì ìš©í•˜ê¸°)

---

# Internationalization (i18n)

ì‚¬ìš©ìì˜ ì–¸ì–´ì— ë§ëŠ” ì›¹í˜ì´ì§€ë¥¼ ì œê³µí•˜ê¸° ìœ„í•´ì„œëŠ” **i18n**ì´ í•„ìš”í•©ë‹ˆë‹¤.

[ë°ëª¨ ì›¹í˜ì´ì§€](https://i18n-next13.vercel.app/)ë¥¼ ë§Œë“¤ë©° **i18n**ì„ [next.js](https://nextjs.org/)ì— ì ìš©í•˜ëŠ” ë°©ë²•ì„ ì•Œì•„ë´…ì‹œë‹¤.

<Callout emoji='ğŸ’¡'>Internationalizationì—ì„œ i ì™€ n ì‚¬ì´ì— 18ê¸€ìê°€ ìˆë‹¤í•˜ì—¬ i18nì´ë¼ê³  ë¶€ë¥¸ë‹¤ê³ í•©ë‹ˆë‹¤ </Callout>

## 1. í”„ë¡œì íŠ¸ ì„¸íŒ…

next.js í”„ë¡œì íŠ¸ë¥¼ ë§Œë“¤ê³  ê°œë°œì„œë²„ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.

```bash
npx create-next-app@latest

âœ” What is your project named? â€¦ i18n
âœ” Would you like to use TypeScript? â€¦ Yes
âœ” Would you like to use ESLint? â€¦ Yes
âœ” Would you like to use Tailwind CSS? â€¦ Yes
âœ” Would you like to use `src/` directory? â€¦ No
âœ” Would you like to use App Router? (recommended) â€¦ Yes
? Would you like to customize the default import alias (@/*)? â€º No

cd i18n
npm run dev
```

ê¸°ì¡´ boilerplateëŠ” ì œê±°í•˜ê³  ì•„ë˜ì™€ ê°™ì´ ë‘ íŒŒì¼ì„ ìˆ˜ì •í•©ë‹ˆë‹¤.

```css title="app/globals.css"
@tailwind base;
@tailwind components;
@tailwind utilities;
```

```tsx title="app/page.tsx"
export default function Page() {
  return <div>home</div>
}
```

ìœ ì €ì˜ locale ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ **ìµœìƒìœ„ root**ì— `middleware.ts` íŒŒì¼ì„ ë§Œë“­ë‹ˆë‹¤.

```ts title="middleware.ts"
import { NextRequest } from 'next/server'

export const middleware = (request: NextRequest) => {
  const { pathname } = request.nextUrl

  console.log(pathname)
}
```

ì›¹í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•œ í›„, í„°ë¯¸ë„ì—ì„œ `console.log(pathname)`ì˜ ê²°ê³¼ë¥¼ í™•ì¸í•´ë´…ì‹œë‹¤.

```bash title="console.log(pathname)"
/
/_next/static/chunks/webpack.js
/_next/static/css/app/layout.css
/_next/static/chunks/main-app.js
/_next/static/chunks/app-pages-internals.js
/_next/static/chunks/webpack.js
/_next/static/chunks/app-pages-internals.js
/_next/static/chunks/main-app.js
/_next/static/css/app/layout.css
```

ìœ„ì™€ ê°™ì´, `middleware`í•¨ìˆ˜ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ëª¨ë“  requestê°€ ì‹¤í–‰ë˜ê¸° ì „ì— ì‹¤í–‰ë©ë‹ˆë‹¤. `/`ì™€ ê°™ì´ routeë¥¼ ì œì™¸í•œ requestì˜ ê²½ìš°ì—ëŠ” middlewareê°€ ì‹¤í–‰ë˜ì§€ ì•Šë„ë¡ ì•„ë˜ì™€ ê°™ì´ `config`ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.

```ts title="middleware.ts"
import { NextRequest } from 'next/server'

export const middleware = (request: NextRequest) => {
  const { pathname } = request.nextUrl

  console.log(pathname)
}

// íŒŒì¼ ì´ë¦„ì— .ì´ ë“¤ì–´ê°„ ê²½ìš°, apië¡œ ì‹œì‘í•˜ëŠ” ê²½ìš° middlewareë¥¼ ì‹¤í–‰í•˜ì§€ ì•Šê² ë‹¤ëŠ” ì„¤ì •ì…ë‹ˆë‹¤.
export const config = { matcher: ['/((?!.*/.|api).*)'] }
```

ë‹¤ì‹œ `console.log(pathname)`ì˜ ê²°ê³¼ë¥¼ í™•ì¸í•´ë³´ë©´ `/`ì˜ ê²½ìš°ì—ë§Œ `middleware`ê°€ ì‹¤í–‰ë˜ëŠ” ê±¸ í™•ì¸ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<Callout emoji='ğŸ’¡'>
  ìì„¸í•œ ë‚´ìš©ì€ [next.js docs - middleware
  matcher](https://nextjs.org/docs/pages/building-your-application/routing/middleware#matcher) í™•ì¸í•˜ì„¸ìš”.
</Callout>

```bash title="console.log(pathname)"
/
```

ê¸°ë³¸ ì„¤ì •ì€ ëë‚¬ìŠµë‹ˆë‹¤. ì´ì œ ì•„ë˜ì˜ ì ˆì°¨ê°€ ë‚¨ì•˜ìŠµë‹ˆë‹¤.

- ì§€ì›í•˜ëŠ” ì–¸ì–´ë³„ë¡œ í…ìŠ¤íŠ¸ë¥¼ ë¯¸ë¦¬ ì„¤ì •í•©ë‹ˆë‹¤.
- ìœ ì €ì˜ localeì„ ê°€ì ¸ì˜µë‹ˆë‹¤.
- í•œêµ­ì¸ ì‚¬ìš©ìê°€ `/`ì— ì ‘ì†í•œ ê²½ìš° `/ko`ë¡œ redirect í•´ì•¼í•©ë‹ˆë‹¤.
- í•œêµ­ì¸ ì‚¬ìš©ìê°€ `/posts/123`ì— ì ‘ì†í•œ ê²½ìš° `/ko/posts/123`ë¡œ redirect í•´ì•¼í•©ë‹ˆë‹¤.

## 2. ì§€ì›í•˜ëŠ” ì–¸ì–´ë³„ë¡œ í…ìŠ¤íŠ¸ ì„¤ì •í•˜ê¸°

`dictionary`í´ë”ë¥¼ ë§Œë“¤ê³  ê·¸ ì•ˆì— `json` íŒŒì¼ë“¤ì„ ë§Œë“­ë‹ˆë‹¤.

```json title="dictionary/cs.json (ì²´ì½”ì–´)"
{
  "welcome": "VÃ­tejte",
  "counter": {
    "increment": "PÅ™idat",
    "decrement": "Ubrat"
  }
}
```

```json title="dictionary/de.json (ë…ì¼ì–´)"
{
  "welcome": "VÃ­tejte",
  "counter": {
    "increment": "PÅ™idat",
    "decrement": "Ubrat"
  }
}
```

```json title="dictionary/en.json (ì˜ì–´)"
{
  "welcome": "VÃ­tejte",
  "counter": {
    "increment": "PÅ™idat",
    "decrement": "Ubrat"
  }
}
```

```json title="dictionary/ko.json (í•œêµ­ì–´)"
{
  "welcome": "VÃ­tejte",
  "counter": {
    "increment": "PÅ™idat",
    "decrement": "Ubrat"
  }
}
```

ê·¸ ë‹¤ìŒìœ¼ë¡œ ì•„ë˜ì˜ íŒŒì¼ì„ ì¶”ê°€í•©ë‹ˆë‹¤.

```ts title="config/i18n.ts"
export const i18n = {
  defaultLocale: 'en',
  locales: ['en', 'de', 'cs', 'ko'],
} as const

// "en" | "de" | "cs" | "ko"
export type Locale = (typeof i18n.locales)[number]
```

`locale`ê°’ì„ ë„£ì–´ì£¼ë©´ ìœ„ì—ì„œ ë§Œë“  `json` ë°ì´í„°ë¥¼ ë°˜í™˜ í•´ ì£¼ëŠ” `get-dictionary.ts` íŒŒì¼ì„ ë§Œë“­ë‹ˆë‹¤.

```ts title="lib/get-dictionary.ts"
import { Locale } from '@/config/i18n'

const dictionaries = {
  en: () => import('@/dictionary/en.json').then((module) => module.default),
  de: () => import('@/dictionary/de.json').then((module) => module.default),
  cs: () => import('@/dictionary/cs.json').then((module) => module.default),
  ko: () => import('@/dictionary/ko.json').then((module) => module.default),
}

export const getDictionary = (locale: Locale) => {
  return dictionaries[locale]?.() ?? dictionaries.en()
}
```

ê·¸ ë‹¤ìŒ ë¼ìš°í„° êµ¬ì¡°ë¥¼ ìˆ˜ì •í•´ì•¼í•©ë‹ˆë‹¤.

`app` í´ë”ì— `[lang]` í´ë”ë¥¼ ë§Œë“  í›„, `[lang]` í´ë” ì•ˆìœ¼ë¡œ `globals.css` `layout.tsx` `page.tsx`ë¥¼ ì˜®ê²¨ì¤ë‹ˆë‹¤.

`page.tsx`ëŠ” ì•„ë˜ì™€ ê°™ì´ ìˆ˜ì •í•´ì¤ë‹ˆë‹¤.

```ts title="app/[lang]/page.tsx"
import type { Locale } from '@/config/i18n'
import { getDictionary } from '@/lib/get-dictionary'

export default async function Page({ params: { lang } }: { params: { lang: Locale } }) {
  const dictionary = await getDictionary(lang)

  return (
    <div className='h-screen flex flex-col gap-4 items-center justify-center'>
      <h1>{dictionary.welcome}</h1>

      <div className='flex space-x-4'>
        <button className='border px-4 py-2 bg-black text-white rounded'>{dictionary.counter.increment}</button>
        <button className='border px-4 py-2 bg-black text-white rounded'>{dictionary.counter.decrement}</button>
      </div>
    </div>
  )
}
```

ì´ì œ í˜ì´ì§€ë³„ë¡œ ì•„ë˜ì™€ ê°™ì´ ë‹¤ë¥¸ ì–¸ì–´ê°€ ë³´ì´ê²Œ ë©ë‹ˆë‹¤.

- `/ko`ë¡œ ë“¤ì–´ì˜¨ ê²½ìš° í•œêµ­ì–´
- `/en`ë¡œ ë“¤ì–´ì˜¨ ê²½ìš° ì˜ì–´
- `/de`ë¡œ ë“¤ì–´ì˜¨ ê²½ìš° ë…ì¼ì–´
- `/cs`ë¡œ ë“¤ì–´ì˜¨ ê²½ìš° ì²´ì½”ì–´

<Callout emoji='âœ‹'>
  `/` ì— ì ‘ê·¼ í•œ ê²½ìš° í˜ì´ì§€ ì—†ìŒ 404 ì—ëŸ¬ê°€ ë°œìƒí•©ë‹ˆë‹¤.
  <br /> `/`ì— ì ‘ê·¼ í•œ ê²½ìš° ì‚¬ìš©ìì˜ localeì— ë”°ë¼ redirect ì‹œì¼œì£¼ëŠ” ë¡œì§ì„ ë§Œë“¤ì–´ë´…ì‹œë‹¤.
</Callout>

## 3. ì‚¬ìš©ì localeì„ ê°€ì ¸ì™€ redirect ì‹œì¼œì£¼ê¸°

ì‚¬ìš©ìì˜ localeì€ `request headerì˜ accept-language`ë¥¼ í†µí•´ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

`middleware.ts` íŒŒì¼ë¡œ ì´ë™í•©ë‹ˆë‹¤.

```ts title="middleware.ts"
import { NextRequest } from 'next/server'

export const middleware = (request: NextRequest) => {
  const { pathname } = request.nextUrl

  // ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7
  console.log(request.headers.get('accept-language'))
}

export const config = { matcher: ['/((?!.*/.|api).*)'] }
```

í„°ë¯¸ë„ì—ì„œ ì½˜ì†” ê²°ê³¼ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”. ê±°ì£¼ ì§€ì—­ì— ë”°ë¼ ìë™ìœ¼ë¡œ locale ê°’ë“¤ì´ ì„¤ì •ë˜ì–´ ìˆìŠµë‹ˆë‹¤. `accept-language`ê²°ê³¼ì— ìš°ë¦¬ ì›¹í˜ì´ì§€ê°€ ì§€ì›í•˜ëŠ” ì–¸ì–´ê°€ ìˆë‹¤ë©´ ê·¸ ì–¸ì–´ë¥¼ `return`í•´ì£¼ê³ , `accept-language`ê²°ê³¼ì— ìš°ë¦¬ ì›¹í˜ì´ì§€ê°€ ì§€ì›í•˜ì§€ ì•ŠëŠ” ì–¸ì–´ë“¤ë§Œ ìˆë‹¤ë©´ ë””í´íŠ¸ê°’ìœ¼ë¡œ `en (ì˜ì–´)`ë¥¼ ë°˜í™˜í•´ì£¼ëŠ” í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ë´…ì‹œë‹¤.

ë¨¼ì € í•„ìš”í•œ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•´ì¤ë‹ˆë‹¤.

```bash
npm i @formatjs/intl-localematcher negotiator
npm i -D @types/negotiator
```

```ts title="lib/get-locale.ts"
import { i18n } from '@/config/i18n'
import { match } from '@formatjs/intl-localematcher'
import Negotiator from 'negotiator'

import { NextRequest } from 'next/server'

export const getLocale = (request: NextRequest) => {
  const headers: Record<string, string> = {}

  // request.headersì˜ ê°’ì„ copyí•©ë‹ˆë‹¤.
  request.headers.forEach((value, key) => {
    headers[key] = value
  })

  // i18n.localesì— ì •ì˜í•´ë‘” ì–¸ì–´ë“¤ì— í¬í•¨ëœ accept-language ê°’ë“¤ë§Œ ë°°ì—´ë¡œ ì¶”ì¶œí•©ë‹ˆë‹¤.
  // https://www.npmjs.com/package/negotiator ì—ì„œ ìì„¸í•œ ë‚´ìš© í™•ì¸
  // @ts-ignore
  const locales = new Negotiator({ headers: headers }).languages(i18n.locales)

  // localesê°€ ë¹ˆ ë°°ì—´ì´ ì•„ë‹Œ ê²½ìš° ì‚¬ìš©ìì˜ localeì„ ë°˜í™˜í•©ë‹ˆë‹¤.
  // localesê°€ ë¹ˆ ë°°ì—´ì¸ ê²½ìš° defaultLocaleì„ ë°˜í™˜í•©ë‹ˆë‹¤.
  // https://formatjs.io/docs/polyfills/intl-localematcher/ ì—ì„œ ìì„¸í•œ ë‚´ìš© í™•ì¸
  const locale = match(locales, i18n.locales, i18n.defaultLocale)

  return locale
}
```

`middleware.ts`ì—ì„œ `getLocale` í•¨ìˆ˜ë¥¼ ë¶ˆëŸ¬ì„œ ê²°ê³¼ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”.

```ts title="middleware.ts"
import { NextRequest } from 'next/server'

export const middleware = (request: NextRequest) => {
  const locale = getLocale(request)
  const { pathname } = request.nextUrl

  // ì €ì˜ ê²½ìš° í•œêµ­ì— ê±°ì£¼ ì¤‘ ì´ë¯€ë¡œ 'ko'ê°€ ì¶œë ¥ë©ë‹ˆë‹¤.
  console.log(locale)
}

export const config = { matcher: ['/((?!.*/.|api).*)'] }
```

ì´ì œ ë‚¨ì€ ë¡œì§ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

- ì£¼ì†Œì— `/ko /en /cs /de`ê°€ ìˆëŠ” ê²½ìš°ì—ëŠ” ë„˜ì–´ê°„ë‹¤.
- `/`ì— ì ‘ì†í•œ ê²½ìš° `/ko`ë¡œ redirect í•œë‹¤.
- `/post/123`ì— ì ‘ì†í•œ ê²½ìš° `/ko/post/123`ìœ¼ë¡œ redirect í•œë‹¤.

```ts title="middleware.ts"
import { NextRequest, NextResponse } from 'next/server'
import { i18n } from './config/i18n'
import { getLocale } from './lib/get-locale'

export const middleware = (request: NextRequest) => {
  const locale = getLocale(request)
  const { pathname } = request.nextUrl

  // ì£¼ì†Œê°€ ko, en, cs, deë¡œ ì‹œì‘í•˜ëŠ” ê²½ìš° true
  const isLocalePathname = i18n.locales.some((loc) => pathname.startsWith(`/${loc}`))

  // ì´ë¯¸ localeì´ ì ìš©ëœ ì£¼ì†Œì´ë¯€ë¡œ middleware chainì„ ëë‚¸ë‹¤.
  if (isLocalePathname) return NextResponse.next()

  // /post/123ìœ¼ë¡œ ì ‘ì†í•˜ë©´ localeì€ 'ko', pathnameì€ /post/123ì´ë‹¤.
  // `/${locale}${pathname}`ì˜ ê²°ê³¼ëŠ” `/ko/post/123`ì´ ëœë‹¤.
  return NextResponse.redirect(new URL(`/${locale}${pathname}`, request.url))
}

export const config = { matcher: ['/((?!.*/.|api).*)'] }
```

## 4. locale ë„¤ë¹„ê²Œì´ì…˜ ë§Œë“¤ê¸°

localeì„ ë³€ê²½í•´ì£¼ëŠ” ë„¤ë¹„ê²Œì´ì…˜ ì»´í¬ë„ŒíŠ¸ë¥¼ ì•„ë˜ì™€ ê°™ì´ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤.

```tsx title="components/locale-switcher.tsx"
'use client'

import { Locale, i18n } from '@/config/i18n'
import Link from 'next/link'
import { usePathname } from 'next/navigation'

export default function LocaleSwitcher() {
  const pathname = usePathname()

  const getPathnameWithLocale = (locale: Locale) => {
    const path = pathname.split('/')
    path[1] = locale

    return path.join('/')
  }

  return (
    <div className='flex gap-2'>
      {i18n.locales.map((locale) => (
        <Link href={getPathnameWithLocale(locale)} key={locale} className='text-white bg-black px-3 py-1 rounded'>
          {locale}
        </Link>
      ))}
    </div>
  )
}
```

`page.tsx`ì— ì¶”ê°€í•´ì¤€ë‹¤.

```tsx title="app/[lang]/page.tsx"
import LocaleSwitcher from '@/components/locale-switcher'
import type { Locale } from '@/config/i18n'
import { getDictionary } from '@/lib/get-dictionary'

export default async function Page({ params: { lang } }: { params: { lang: Locale } }) {
  const dictionary = await getDictionary(lang)

  return (
    <div className='h-screen flex flex-col gap-4 items-center justify-center'>
      <LocaleSwitcher />
      <h1>{dictionary.welcome}</h1>

      {...}
    </div>
  )
}
```

ì—¬ê¸°ê¹Œì§€ ë”°ë¼ì™”ë‹¤ë©´ [ë°ëª¨ í˜ì´ì§€](https://i18n-next13.vercel.app/ko)ì™€ ê°™ì€ í™”ë©´ì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## 5. SSG ì ìš©í•˜ê¸°

í˜ì´ì§€ë³„ë¡œ [static site generation](https://nextjs.org/docs/pages/building-your-application/rendering/static-site-generation)ë¥¼ ì ìš©í•˜ê³  ì‹¶ì€ ê²½ìš° `layout.tsx`íŒŒì¼ì— `generateStaticParams`ì„ ë‹¤ìŒê³¼ ê°™ì´ ì¶”ê°€í•˜ì„¸ìš”.

```tsx title="app/[lang]/layout.tsx"
import type { Metadata } from 'next'
import { Inter } from 'next/font/google'
import './globals.css'
import { i18n } from '@/config/i18n'

const inter = Inter({ subsets: ['latin'] })

export const generateStaticParams = () => {
  return i18n.locales.map((locale) => ({
    lang: locale,
  }))
}

export const metadata: Metadata = {
  title: 'i18n',
  description: 'How to do i18n in Next.js 13+ within app directory',
}

export default function RootLayout({ children, params }: { children: React.ReactNode; params: { lang: string } }) {
  return (
    <html lang={params.lang}>
      <body className={inter.className}>{children}</body>
    </html>
  )
}
```

ë¹Œë“œ ê²°ê³¼ë¬¼ì„ í™•ì¸í•´ë´…ì‹œë‹¤.

```bash
npm run build
```

<img alt={'static site generation build result'} src={'/posts/i18n/build-result.png'} width={768} height={416} />

`/[lang]` ì´ SSGë¡œ ë¹Œë“œëœ ê²°ê³¼ë¥¼ í™•ì¸ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

next.jsì˜ i18nì— ëŒ€í•œ ìì„¸í•œ ë‚´ìš©ì€ ì•„ë˜ì—ì„œ í™•ì¸í•˜ì„¸ìš”.

- [https://nextjs.org/docs/app/building-your-application/routing/internationalization](https://nextjs.org/docs/app/building-your-application/routing/internationalization)
